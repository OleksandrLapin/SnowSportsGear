import{b as E,c as de}from"./chunk-EEDA453I.js";import{a as fe,b as he}from"./chunk-XPVZR77E.js";import{a as ue,b as pe}from"./chunk-2N7H4GH4.js";import{a as v,d as G}from"./chunk-TWCHZGE4.js";import{$a as I,Ha as M,Ia as se,Ma as k,Na as j,Pa as N,Ra as l,Sa as le,Ta as S,Ua as T,Xa as q,Za as ce,_a as P,da as F,eb as R,fa as A,gb as C,hb as V,i as B,ib as O,jb as w,k as U,l as L}from"./chunk-3VDJTOIS.js";import{Db as _,Eb as oe,Gb as ne,Hb as ae,Ib as i,Jb as e,Kb as u,Ob as H,Rb as p,Tb as x,Vc as me,Wb as X,_ as ie,bc as o,cb as c,cc as $,db as re,dc as K,jc as b,ka as s,oa as g,wb as D,xa as J,ya as W,yb as h}from"./chunk-XXTPASVJ.js";function f(a,n){return a?typeof a=="string"?a:typeof a.error=="string"?a.error:typeof a.error?.message=="string"?a.error.message:typeof a.message=="string"?a.message:n:n}function _e(a,n){if(a&1){let d=H();i(0,"button",12),p("click",function(){J(d);let t=x(2);return W(t.resendConfirmation())}),o(1,"Resend confirmation"),e()}}function Fe(a,n){if(a&1){let d=H();i(0,"form",2),p("ngSubmit",function(){J(d);let t=x();return W(t.onSubmit())}),i(1,"div",3)(2,"h1",4),o(3,"Login"),e()(),i(4,"mat-form-field",5)(5,"mat-label"),o(6,"Email address"),e(),u(7,"input",6),e(),i(8,"mat-form-field",5)(9,"mat-label"),o(10,"Password"),e(),u(11,"input",7),e(),i(12,"div",8)(13,"a",9),o(14,"Forgot password?"),e(),D(15,_e,2,0,"button",10),e(),i(16,"button",11),o(17,"Sign in"),e()()}if(a&2){let d=x();h("formGroup",d.loginForm),c(15),_(d.pendingEmail?15:-1)}}function Me(a,n){if(a&1){let d=H();i(0,"form",2),p("ngSubmit",function(){J(d);let t=x();return W(t.verifyCode())}),i(1,"div",3)(2,"h1",4),o(3,"Verify your email"),e(),i(4,"p",13),o(5),e()(),i(6,"mat-form-field",5)(7,"mat-label"),o(8,"Verification code"),e(),u(9,"input",14),e(),i(10,"div",8)(11,"button",12),p("click",function(){J(d);let t=x();return W(t.backToLogin())}),o(12,"Back to login"),e(),i(13,"button",12),p("click",function(){J(d);let t=x();return W(t.resendConfirmation())}),o(14,"Resend code"),e()(),i(15,"button",11),o(16,"Verify"),e()()}if(a&2){let d=x();h("formGroup",d.twoFactorForm),c(5),K("Enter the code sent to ",d.pendingEmail,"")}}var ge=(()=>{let n=class n{constructor(){this.fb=s(R),this.accountService=s(E),this.router=s(U),this.activatedRoute=s(B),this.snack=s(w),this.returnUrl="/shop",this.step="login",this.pendingEmail="",this.loginForm=this.fb.group({email:["",[l.required,l.email]],password:["",l.required]}),this.twoFactorForm=this.fb.group({code:["",l.required]});let r=this.activatedRoute.snapshot.queryParams.returnUrl;r&&(this.returnUrl=r)}onSubmit(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched();return}let r=this.loginForm.value;this.accountService.login(r).subscribe({next:t=>{if(t.requiresTwoFactor){this.pendingEmail=r.email,this.step="twoFactor",this.snack.success("Verification code sent to your email");return}t.success&&this.accountService.completeLogin().subscribe(()=>{this.router.navigateByUrl(this.returnUrl)})},error:t=>{if(t?.status===403&&t?.error?.requiresEmailConfirmation){this.pendingEmail=r.email,this.snack.success("Confirmation code sent. Enter it to continue."),this.router.navigate(["/account/confirm-email"],{queryParams:{email:r.email}});return}this.snack.error(f(t,"Login failed"))}})}verifyCode(){if(this.twoFactorForm.invalid||!this.pendingEmail){this.twoFactorForm.markAllAsTouched();return}let r={email:this.pendingEmail,code:this.twoFactorForm.value.code??""};this.accountService.verifyTwoFactor(r).subscribe({next:t=>{if(!t.success){this.snack.error(t.message||"Invalid code");return}this.accountService.completeLogin().subscribe(()=>{this.router.navigateByUrl(this.returnUrl)})},error:t=>{this.snack.error(f(t,"Invalid code"))}})}resendConfirmation(){this.pendingEmail&&this.accountService.resendConfirmation(this.pendingEmail).subscribe({next:()=>this.snack.success("Confirmation email resent"),error:r=>this.snack.error(f(r,"Unable to resend confirmation"))})}backToLogin(){this.step="login"}};n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g({type:n,selectors:[["app-login"]],standalone:!0,features:[b],decls:3,vars:1,consts:[[1,"max-w-lg","mx-auto","mt-32","p-8","bg-white"],[3,"formGroup"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-6"],[1,"text-3xl","font-semibold","text-primary"],["appearance","outline",1,"w-full","mb-4"],["formControlName","email","type","email","placeholder","name@example.com","matInput",""],["formControlName","password","type","password","placeholder","Password","matInput",""],[1,"flex","justify-between","items-center","mb-4","text-sm"],["routerLink","/account/forgot-password",1,"text-primary","hover:underline"],["type","button",1,"text-primary","hover:underline"],["mat-flat-button","","type","submit",1,"w-full","py-2"],["type","button",1,"text-primary","hover:underline",3,"click"],[1,"text-sm","text-gray-600","mt-2"],["formControlName","code","placeholder","Enter code","matInput",""]],template:function(t,m){t&1&&(i(0,"mat-card",0),D(1,Fe,18,2,"form",1)(2,Me,17,2,"form",1),e()),t&2&&(c(),_(m.step==="login"?1:2))},dependencies:[C,q,N,S,T,P,I,v,k,V,M,F,L]});let a=n;return a})();function ke(a,n){if(a&1&&(i(0,"mat-error"),o(1),e()),a&2){let d=x();c(),K("",d.label," is required")}}function Ne(a,n){a&1&&(i(0,"mat-error"),o(1,"Email is invalid"),e())}var be=(()=>{let n=class n{constructor(r){this.controlDir=r,this.label="",this.type="text",this.controlDir.valueAccessor=this}writeValue(r){}registerOnChange(r){}registerOnTouched(r){}get control(){return this.controlDir.control}};n.\u0275fac=function(t){return new(t||n)(re(le,2))},n.\u0275cmp=g({type:n,selectors:[["app-text-input"]],inputs:{label:"label",type:"type"},standalone:!0,features:[b],decls:6,vars:6,consts:[["appearance","outline",1,"w-full","mb-4"],["matInput","",3,"formControl","type","placeholder"]],template:function(t,m){t&1&&(i(0,"mat-form-field",0)(1,"mat-label"),o(2),e(),u(3,"input",1),D(4,ke,2,1,"mat-error")(5,Ne,2,0,"mat-error"),e()),t&2&&(c(2),$(m.label),c(),X("type",m.type),X("placeholder",m.label),h("formControl",m.control),c(),_(m.control.hasError("required")?4:-1),c(),_(m.control.hasError("email")?5:-1))},dependencies:[C,N,S,ce,k,V,se,M]});let a=n;return a})();function Te(a,n){if(a&1&&(i(0,"li"),o(1),e()),a&2){let d=n.$implicit;c(),$(d)}}function qe(a,n){if(a&1&&(i(0,"div",8)(1,"ul",10),ne(2,Te,2,1,"li",null,oe),e()()),a&2){let d=x();c(2),ae(d.validationErrors)}}var xe=(()=>{let n=class n{constructor(){this.fb=s(R),this.accountService=s(E),this.router=s(U),this.snack=s(w),this.registerForm=this.fb.group({firstName:["",l.required],lastName:["",l.required],email:["",[l.required,l.email]],password:["",l.required]})}onSubmit(){this.accountService.register(this.registerForm.value).subscribe({next:r=>{if(r?.requiresEmailConfirmation){this.snack.success(r.message||"Check your email to confirm your account");let t=this.registerForm.value.email??"";this.router.navigate(["/account/confirm-email"],{queryParams:{email:t}});return}this.snack.success("Registration successful - you can now login"),this.router.navigateByUrl("/account/login")},error:r=>this.validationErrors=r})}};n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g({type:n,selectors:[["app-register"]],standalone:!0,features:[b],decls:12,vars:3,consts:[[1,"max-w-lg","mx-auto","mt-32","p-8","bg-white"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-6"],[1,"text-3xl","font-semibold","text-primary"],["label","First name","formControlName","firstName"],["label","Last name","formControlName","lastName"],["label","Email address","formControlName","email"],["label","Password","formControlName","password","type","password"],[1,"mb-3","p-4","bg-red-100","text-red-600"],["mat-flat-button","","type","submit",1,"w-full","py-2",3,"disabled"],[1,"list-disc","px-3"]],template:function(t,m){t&1&&(i(0,"mat-card",0)(1,"form",1),p("ngSubmit",function(){return m.onSubmit()}),i(2,"div",2)(3,"h1",3),o(4,"Register"),e()(),u(5,"app-text-input",4)(6,"app-text-input",5)(7,"app-text-input",6)(8,"app-text-input",7),D(9,qe,4,0,"div",8),i(10,"button",9),o(11,"Register"),e()()()),t&2&&(c(),h("formGroup",m.registerForm),c(8),_(m.validationErrors?9:-1),c(),h("disabled",m.registerForm.invalid))},dependencies:[C,q,S,T,P,I,v,F,be]});let a=n;return a})();var ve=(()=>{let n=class n{constructor(){this.fb=s(R),this.accountService=s(E),this.snackbar=s(w),this.profileForm=this.fb.group({firstName:["",l.required],lastName:["",l.required]}),this.passwordForm=this.fb.group({currentPassword:["",l.required],newPassword:["",[l.required,l.minLength(6)]]}),this.emailForm=this.fb.group({newEmail:["",[l.required,l.email]]}),this.twoFactorEnabled=!1}ngOnInit(){let r=this.accountService.currentUser();r?(this.profileForm.patchValue({firstName:r.firstName,lastName:r.lastName}),this.twoFactorEnabled=!!r.twoFactorEnabled):this.accountService.getUserInfo().subscribe({next:t=>{this.profileForm.patchValue({firstName:t.firstName,lastName:t.lastName}),this.twoFactorEnabled=!!t.twoFactorEnabled}})}saveProfile(){if(this.profileForm.invalid){this.profileForm.markAllAsTouched();return}this.accountService.updateProfile(this.profileForm.value).subscribe({next:()=>this.snackbar.success("Profile updated"),error:()=>this.snackbar.error("Unable to update profile")})}changePassword(){if(this.passwordForm.invalid){this.passwordForm.markAllAsTouched();return}this.accountService.changePassword(this.passwordForm.value).subscribe({next:()=>{this.snackbar.success("Password changed"),this.passwordForm.reset()},error:r=>{this.snackbar.error(f(r,"Unable to change password"))}})}requestPasswordReset(){this.accountService.requestPasswordReset().subscribe({next:()=>this.snackbar.success("Password reset email sent"),error:r=>this.snackbar.error(f(r,"Unable to send reset email"))})}requestEmailChange(){if(this.emailForm.invalid){this.emailForm.markAllAsTouched();return}let r=this.emailForm.value.newEmail??"";this.accountService.requestEmailChange(r).subscribe({next:()=>{this.snackbar.success("Email change confirmation sent"),this.emailForm.reset()},error:t=>this.snackbar.error(f(t,"Unable to request email change"))})}toggleTwoFactor(r){let t=r.checked;this.accountService.toggleTwoFactor(t).subscribe({next:()=>{this.twoFactorEnabled=t,this.snackbar.success(t?"Two-factor enabled":"Two-factor disabled")},error:m=>{this.snackbar.error(f(m,"Unable to update two-factor settings"))}})}requestDataExport(){this.accountService.requestDataExport().subscribe({next:()=>this.snackbar.success("Data export request sent"),error:r=>this.snackbar.error(f(r,"Unable to request data export"))})}requestDeletion(){this.accountService.requestAccountDeletion().subscribe({next:()=>this.snackbar.success("Deletion request sent"),error:r=>this.snackbar.error(f(r,"Unable to request deletion"))})}};n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g({type:n,selectors:[["app-profile"]],standalone:!0,features:[b],decls:82,vars:4,consts:[[1,"max-w-3xl","mx-auto","py-10"],[1,"text-2xl","font-semibold","mb-6"],[1,"mb-6"],[1,"p-4"],[1,"text-xl","font-semibold","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-full"],["matInput","","formControlName","firstName"],["matInput","","formControlName","lastName"],[1,"md:col-span-2","flex","justify-end"],["mat-flat-button","","color","primary","type","submit"],["matInput","","type","password","formControlName","currentPassword"],["matInput","","type","password","formControlName","newPassword"],[1,"mt-6"],[1,"p-4","space-y-4"],[1,"text-xl","font-semibold"],[1,"text-sm","text-gray-600"],[1,"flex","items-center","justify-between"],[1,"font-medium"],[3,"change","checked"],["mat-stroked-button","","color","primary","type","button",3,"click"],["appearance","outline",1,"w-full","md:col-span-2"],["matInput","","formControlName","newEmail","placeholder","name@example.com"],[1,"flex","flex-wrap","gap-3"],["mat-stroked-button","","type","button",3,"click"],["mat-stroked-button","","color","warn","type","button",3,"click"]],template:function(t,m){t&1&&(i(0,"div",0)(1,"h2",1),o(2,"Account settings"),e(),i(3,"mat-card",2)(4,"div",3)(5,"h3",4),o(6,"Profile"),e(),i(7,"form",5),p("ngSubmit",function(){return m.saveProfile()}),i(8,"mat-form-field",6)(9,"mat-label"),o(10,"First name"),e(),u(11,"input",7),e(),i(12,"mat-form-field",6)(13,"mat-label"),o(14,"Last name"),e(),u(15,"input",8),e(),i(16,"div",9)(17,"button",10),o(18,"Save profile"),e()()()()(),i(19,"mat-card")(20,"div",3)(21,"h3",4),o(22,"Change password"),e(),i(23,"form",5),p("ngSubmit",function(){return m.changePassword()}),i(24,"mat-form-field",6)(25,"mat-label"),o(26,"Current password"),e(),u(27,"input",11),e(),i(28,"mat-form-field",6)(29,"mat-label"),o(30,"New password"),e(),u(31,"input",12),e(),i(32,"div",9)(33,"button",10),o(34,"Update password"),e()()()()(),i(35,"mat-card",13)(36,"div",14)(37,"div")(38,"h3",15),o(39,"Security"),e(),i(40,"p",16),o(41,"Manage verification and password recovery."),e()(),i(42,"div",17)(43,"div")(44,"div",18),o(45,"Two-factor authentication"),e(),i(46,"div",16),o(47,"Require a code sent to your email when signing in."),e()(),i(48,"mat-slide-toggle",19),p("change",function(ye){return m.toggleTwoFactor(ye)}),e()(),u(49,"mat-divider"),i(50,"div",17)(51,"div")(52,"div",18),o(53,"Reset password via email"),e(),i(54,"div",16),o(55,"Send yourself a secure reset link."),e()(),i(56,"button",20),p("click",function(){return m.requestPasswordReset()}),o(57,"Send reset email"),e()()()(),i(58,"mat-card",13)(59,"div",3)(60,"h3",4),o(61,"Change email"),e(),i(62,"form",5),p("ngSubmit",function(){return m.requestEmailChange()}),i(63,"mat-form-field",21)(64,"mat-label"),o(65,"New email address"),e(),u(66,"input",22),e(),i(67,"div",9)(68,"button",10),o(69,"Send confirmation"),e()()()()(),i(70,"mat-card",13)(71,"div",14)(72,"div")(73,"h3",15),o(74,"Privacy requests"),e(),i(75,"p",16),o(76,"Request a data export or account deletion."),e()(),i(77,"div",23)(78,"button",24),p("click",function(){return m.requestDataExport()}),o(79,"Request data export"),e(),i(80,"button",25),p("click",function(){return m.requestDeletion()}),o(81,"Request deletion"),e()()()()()),t&2&&(c(7),h("formGroup",m.profileForm),c(16),h("formGroup",m.passwordForm),c(25),h("checked",m.twoFactorEnabled),c(14),h("formGroup",m.emailForm))},dependencies:[me,C,q,N,S,T,P,I,G,v,j,k,M,O,V,A,F,pe,ue,he,fe],styles:[".mat-mdc-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb}form[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{margin-bottom:0}"]});let a=n;return a})();var Se=(()=>{let n=class n{constructor(){this.fb=s(R),this.accountService=s(E),this.snack=s(w),this.form=this.fb.group({email:["",[l.required,l.email]]})}submit(){if(this.form.invalid){this.form.markAllAsTouched();return}let r=this.form.value.email??"";this.accountService.forgotPassword(r).subscribe({next:()=>{this.snack.success("Password reset email sent")},error:t=>{this.snack.error(f(t,"Unable to send reset email"))}})}};n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g({type:n,selectors:[["app-forgot-password"]],standalone:!0,features:[b],decls:16,vars:1,consts:[[1,"max-w-lg","mx-auto","mt-32","p-8","bg-white"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-6"],[1,"text-3xl","font-semibold","text-primary"],[1,"text-sm","text-gray-600","mt-2"],["appearance","outline",1,"w-full","mb-4"],["formControlName","email","type","email","placeholder","name@example.com","matInput",""],["mat-flat-button","","type","submit",1,"w-full","py-2"],[1,"text-center","mt-4","text-sm"],["routerLink","/account/login",1,"text-primary","hover:underline"]],template:function(t,m){t&1&&(i(0,"mat-card",0)(1,"form",1),p("ngSubmit",function(){return m.submit()}),i(2,"div",2)(3,"h1",3),o(4,"Forgot password"),e(),i(5,"p",4),o(6,"We will email you a reset link."),e()(),i(7,"mat-form-field",5)(8,"mat-label"),o(9,"Email address"),e(),u(10,"input",6),e(),i(11,"button",7),o(12,"Send reset link"),e(),i(13,"div",8)(14,"a",9),o(15,"Back to login"),e()()()()),t&2&&(c(),h("formGroup",m.form))},dependencies:[C,q,N,S,T,P,I,G,v,j,k,M,O,V,A,F,L],encapsulation:2});let a=n;return a})();var Ce=(()=>{let n=class n{constructor(){this.fb=s(R),this.route=s(B),this.router=s(U),this.accountService=s(E),this.snack=s(w),this.form=this.fb.group({email:["",[l.required,l.email]],token:["",l.required],newPassword:["",[l.required,l.minLength(6)]]})}ngOnInit(){let r=this.route.snapshot.queryParamMap.get("email"),t=this.route.snapshot.queryParamMap.get("token");r&&this.form.patchValue({email:r}),t&&this.form.patchValue({token:t})}submit(){if(this.form.invalid){this.form.markAllAsTouched();return}let r=this.form.value;this.accountService.resetPassword(r).subscribe({next:()=>{this.snack.success("Password updated"),this.router.navigateByUrl("/account/login")},error:t=>{this.snack.error(f(t,"Unable to reset password"))}})}};n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g({type:n,selectors:[["app-reset-password"]],standalone:!0,features:[b],decls:24,vars:1,consts:[[1,"max-w-lg","mx-auto","mt-32","p-8","bg-white"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-6"],[1,"text-3xl","font-semibold","text-primary"],[1,"text-sm","text-gray-600","mt-2"],["appearance","outline",1,"w-full","mb-4"],["formControlName","email","type","email","placeholder","name@example.com","matInput",""],["formControlName","token","placeholder","Paste the code from email","matInput",""],["formControlName","newPassword","type","password","placeholder","New password","matInput",""],["mat-flat-button","","type","submit",1,"w-full","py-2"],[1,"text-center","mt-4","text-sm"],["routerLink","/account/login",1,"text-primary","hover:underline"]],template:function(t,m){t&1&&(i(0,"mat-card",0)(1,"form",1),p("ngSubmit",function(){return m.submit()}),i(2,"div",2)(3,"h1",3),o(4,"Reset password"),e(),i(5,"p",4),o(6,"Choose a new password for your account."),e()(),i(7,"mat-form-field",5)(8,"mat-label"),o(9,"Email address"),e(),u(10,"input",6),e(),i(11,"mat-form-field",5)(12,"mat-label"),o(13,"Verification code"),e(),u(14,"input",7),e(),i(15,"mat-form-field",5)(16,"mat-label"),o(17,"New password"),e(),u(18,"input",8),e(),i(19,"button",9),o(20,"Update password"),e(),i(21,"div",10)(22,"a",11),o(23,"Back to login"),e()()()()),t&2&&(c(),h("formGroup",m.form))},dependencies:[C,q,N,S,T,P,I,G,v,j,k,M,O,V,A,F,L],encapsulation:2});let a=n;return a})();function Pe(a,n){a&1&&(i(0,"mat-form-field",5)(1,"mat-label"),o(2,"Email address"),e(),u(3,"input",12),e())}function Ie(a,n){if(a&1&&(i(0,"div",6),o(1," Code sent to "),i(2,"span",13),o(3),e()()),a&2){let d,r=x();c(3),$((d=r.form.get("email"))==null?null:d.value)}}var we=(()=>{let n=class n{constructor(){this.fb=s(R),this.route=s(B),this.router=s(U),this.accountService=s(E),this.snack=s(w),this.emailLocked=!1,this.form=this.fb.group({email:["",[l.required,l.email]],token:["",l.required]})}ngOnInit(){let r=this.route.snapshot.queryParamMap.get("email"),t=this.route.snapshot.queryParamMap.get("token");r&&(this.form.patchValue({email:r}),this.emailLocked=!0),t&&this.form.patchValue({token:t})}confirm(){if(this.form.invalid){this.form.markAllAsTouched();return}let r=this.form.value;this.accountService.confirmEmail(r).pipe(ie(()=>this.accountService.completeLogin())).subscribe({next:()=>{this.snack.success("Email confirmed. You are now logged in."),this.router.navigateByUrl("/shop")},error:t=>{this.snack.error(f(t,"Unable to confirm email"))}})}resend(){let r=this.form.value.email??"";if(!r){this.snack.error("Enter an email address first");return}this.accountService.resendConfirmation(r).subscribe({next:()=>this.snack.success("Confirmation email resent"),error:t=>this.snack.error(f(t,"Unable to resend confirmation"))})}};n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g({type:n,selectors:[["app-confirm-email"]],standalone:!0,features:[b],decls:20,vars:2,consts:[[1,"max-w-lg","mx-auto","mt-32","p-8","bg-white"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-6"],[1,"text-3xl","font-semibold","text-primary"],[1,"text-sm","text-gray-600","mt-2"],["appearance","outline",1,"w-full","mb-4"],[1,"mb-4","text-sm","text-gray-600"],["formControlName","token","placeholder","Paste the code","matInput",""],["mat-flat-button","","type","submit",1,"w-full","py-2"],[1,"flex","justify-between","items-center","mt-4","text-sm"],["type","button",1,"text-primary","hover:underline",3,"click"],["routerLink","/account/login",1,"text-primary","hover:underline"],["formControlName","email","type","email","placeholder","name@example.com","matInput",""],[1,"font-medium"]],template:function(t,m){t&1&&(i(0,"mat-card",0)(1,"form",1),p("ngSubmit",function(){return m.confirm()}),i(2,"div",2)(3,"h1",3),o(4,"Confirm email"),e(),i(5,"p",4),o(6,"Enter the confirmation code from your email."),e()(),D(7,Pe,4,0,"mat-form-field",5)(8,Ie,4,1,"div",6),i(9,"mat-form-field",5)(10,"mat-label"),o(11,"Confirmation code"),e(),u(12,"input",7),e(),i(13,"button",8),o(14,"Confirm email"),e(),i(15,"div",9)(16,"button",10),p("click",function(){return m.resend()}),o(17,"Resend code"),e(),i(18,"a",11),o(19,"Back to login"),e()()()()),t&2&&(c(),h("formGroup",m.form),c(6),_(m.emailLocked?8:7))},dependencies:[C,q,N,S,T,P,I,G,v,j,k,M,O,V,A,F,L],encapsulation:2});let a=n;return a})();function Re(a,n){a&1&&(i(0,"p",3),o(1,"Confirming your new email address..."),e())}function Ve(a,n){a&1&&(i(0,"p",3),o(1,"You can now continue with your account."),e(),i(2,"div",4)(3,"a",5),o(4,"Go to profile"),e()())}var Ee=(()=>{let n=class n{constructor(){this.route=s(B),this.accountService=s(E),this.snack=s(w),this.processing=!0}ngOnInit(){let r=this.route.snapshot.queryParamMap.get("userId"),t=this.route.snapshot.queryParamMap.get("newEmail"),m=this.route.snapshot.queryParamMap.get("token");if(!r||!t||!m){this.processing=!1,this.snack.error("Invalid confirmation link");return}this.accountService.confirmEmailChange({userId:r,newEmail:t,token:m}).subscribe({next:()=>{this.processing=!1,this.snack.success("Email updated")},error:y=>{this.processing=!1,this.snack.error(f(y,"Unable to confirm email change"))}})}};n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g({type:n,selectors:[["app-confirm-email-change"]],standalone:!0,features:[b],decls:6,vars:1,consts:[[1,"max-w-lg","mx-auto","mt-32","p-8","bg-white"],[1,"text-center"],[1,"text-3xl","font-semibold","text-primary","mb-2"],[1,"text-sm","text-gray-600"],[1,"mt-4"],["routerLink","/account/profile",1,"text-primary","hover:underline"]],template:function(t,m){t&1&&(i(0,"mat-card",0)(1,"div",1)(2,"h1",2),o(3,"Confirm email change"),e(),D(4,Re,2,0,"p",3)(5,Ve,5,0),e()()),t&2&&(c(4),_(m.processing?4:5))},dependencies:[G,v,A,L],encapsulation:2});let a=n;return a})();var _i=[{path:"login",component:ge},{path:"register",component:xe},{path:"forgot-password",component:Se},{path:"reset-password",component:Ce},{path:"confirm-email",component:we},{path:"confirm-email-change",component:Ee},{path:"profile",component:ve,canActivate:[de]}];export{_i as accountRoutes};
