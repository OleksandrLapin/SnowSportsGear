<div class="mx-auto mt-32 max-w-5xl px-4">
    <h2 class="font-semibold text-2xl mb-6 text-center">My orders</h2>
    <div class="space-y-4">
        @for (order of orders; track order.id) {
            <div routerLink="/orders/{{order.id}}"
                class="cursor-pointer rounded-lg border border-gray-200 bg-white shadow-sm transition hover:border-gray-300 hover:shadow-md">
                <div class="p-4">
                    <div class="flex flex-wrap items-start justify-between gap-4">
                        <div>
                            <p class="text-sm text-gray-500">Order #{{order.id}}</p>
                            <p class="font-semibold">{{order.orderDate | date: 'medium'}}</p>
                            <p class="text-sm text-gray-500">
                                Items: {{order.totalItems ?? order.previewItems?.length ?? 0}}
                            </p>
                        </div>
                        <div class="flex items-center gap-3">
                            <span class="rounded-full px-3 py-1 text-xs font-medium {{statusClasses[order.status] || 'bg-gray-100 text-gray-700'}}">
                                {{statusLabels[order.status] || order.status}}
                            </span>
                            <span class="text-lg font-semibold">{{order.total | currency}}</span>
                        </div>
                    </div>
                    <div class="mt-4 border-t border-gray-100 pt-4">
                        @if (order.previewItems?.length) {
                            <div class="grid gap-3 sm:grid-cols-2">
                                @for (item of order.previewItems; track item.productId + '-' + item.size) {
                                    <div class="flex items-center gap-3">
                                        <img src="{{item.pictureUrl}}" alt="{{item.productName}}"
                                            class="h-12 w-12 rounded-md border border-gray-200 object-cover">
                                        <div class="min-w-0 flex-1">
                                            <p class="truncate text-sm font-medium text-gray-900">
                                                {{item.productName}}
                                            </p>
                                            <p class="text-xs text-gray-500">Size {{item.size}} | Qty {{item.quantity}}</p>
                                        </div>
                                        <div class="text-sm font-semibold text-gray-900">
                                            {{item.price | currency}}
                                        </div>
                                    </div>
                                }
                            </div>
                            @if (order.totalItems && order.previewItems && order.totalItems > order.previewItems.length) {
                                <p class="mt-3 text-sm text-gray-500">
                                    {{order.totalItems - order.previewItems.length}} more item(s)
                                </p>
                            }
                        } @else {
                            <p class="text-sm text-gray-500">Items will appear here soon.</p>
                        }
                    </div>
                </div>
            </div>
        }
    </div>
</div>
