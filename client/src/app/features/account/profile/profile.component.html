<div class="max-w-3xl mx-auto py-10">
  <h2 class="text-2xl font-semibold mb-6">Account settings</h2>

  <mat-card class="mb-6">
    <div class="p-4">
      <h3 class="text-xl font-semibold mb-4">Profile</h3>
      <form [formGroup]="profileForm" class="grid grid-cols-1 md:grid-cols-2 gap-4" (ngSubmit)="saveProfile()">
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>First name</mat-label>
          <input matInput formControlName="firstName">
        </mat-form-field>
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Last name</mat-label>
          <input matInput formControlName="lastName">
        </mat-form-field>
        <div class="md:col-span-2 flex justify-end">
          <button mat-flat-button color="primary" type="submit">Save profile</button>
        </div>
      </form>
    </div>
  </mat-card>

  <mat-card>
    <div class="p-4">
      <h3 class="text-xl font-semibold mb-4">Change password</h3>
      <form [formGroup]="passwordForm" class="grid grid-cols-1 md:grid-cols-2 gap-4" (ngSubmit)="changePassword()">
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Current password</mat-label>
          <input matInput type="password" formControlName="currentPassword">
        </mat-form-field>
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>New password</mat-label>
          <input matInput type="password" formControlName="newPassword">
        </mat-form-field>
        <div class="md:col-span-2 flex justify-end">
          <button mat-flat-button color="primary" type="submit">Update password</button>
        </div>
      </form>
    </div>
  </mat-card>

  <mat-card class="mt-6">
    <div class="p-4 space-y-4">
      <div>
        <h3 class="text-xl font-semibold">Security</h3>
        <p class="text-sm text-gray-600">Manage verification and password recovery.</p>
      </div>
      <div class="flex items-center justify-between">
        <div>
          <div class="font-medium">Two-factor authentication</div>
          <div class="text-sm text-gray-600">Require a code sent to your email when signing in.</div>
        </div>
        <mat-slide-toggle [checked]="twoFactorEnabled" (change)="toggleTwoFactor($event)"></mat-slide-toggle>
      </div>
      <mat-divider></mat-divider>
      <div class="flex items-center justify-between">
        <div>
          <div class="font-medium">Reset password via email</div>
          <div class="text-sm text-gray-600">Send yourself a secure reset link.</div>
        </div>
        <button mat-stroked-button color="primary" type="button" (click)="requestPasswordReset()">Send reset email</button>
      </div>
    </div>
  </mat-card>

  <mat-card class="mt-6">
    <div class="p-4">
      <h3 class="text-xl font-semibold mb-4">Change email</h3>
      <form [formGroup]="emailForm" class="grid grid-cols-1 md:grid-cols-2 gap-4" (ngSubmit)="requestEmailChange()">
        <mat-form-field appearance="outline" class="w-full md:col-span-2">
          <mat-label>New email address</mat-label>
          <input matInput formControlName="newEmail" placeholder="name@example.com">
        </mat-form-field>
        <div class="md:col-span-2 flex justify-end">
          <button mat-flat-button color="primary" type="submit">Send confirmation</button>
        </div>
      </form>
    </div>
  </mat-card>

  <mat-card class="mt-6">
    <div class="p-4 space-y-4">
      <div>
        <h3 class="text-xl font-semibold">Privacy requests</h3>
        <p class="text-sm text-gray-600">Request a data export or account deletion.</p>
      </div>
      <div class="flex flex-wrap gap-3">
        <button mat-stroked-button type="button" (click)="requestDataExport()">Request data export</button>
        <button mat-stroked-button color="warn" type="button" (click)="requestDeletion()">Request deletion</button>
      </div>
    </div>
  </mat-card>
</div>
